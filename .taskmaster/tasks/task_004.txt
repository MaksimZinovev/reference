# Task ID: 4
# Title: Ensure Theme Path Safety
# Status: in-progress
# Dependencies: 2
# Priority: high
# Description: Verify all theme assets use path-safe helpers for proper linking
# Details:
Review EJS layouts in the theme to ensure all asset links use Hexo helpers: url_for('/css/style.css'), css('/css/style.css'), js('/js/app.js'). This prevents broken paths when root is not set to / and is essential for proper asset loading on GitHub Pages. Additional work identified to fix search functionality path issues related to subdirectory deployment configuration.

# Test Strategy:
Inspect theme EJS files to verify all asset links use Hexo helpers. Build the site locally and verify asset paths in generated HTML. Test with different root configurations to ensure path safety. Verify search functionality works correctly with subdirectory configuration.

# Subtasks:
## 1. Fix hardcoded domain references in EJS templates [done]
### Dependencies: None
### Description: Update hardcoded 'cheatsheets.zip' references in hero.ejs, footer.ejs, and other EJS template files to use dynamic URL configuration. This includes tooltips, affiliate links, and copyright text.
### Details:


## 2. Fix hardcoded domain in global.js URL generation [done]
### Dependencies: None
### Description: Update hardcoded 'https://cheatsheets.zip' URL in themes/coo/scripts/global.js line 79 to use dynamic URL configuration. This prevents broken links in generated list.md file.
### Details:


## 3. Test generated links after domain reference fixes [done]
### Dependencies: None
### Description: After updating hardcoded domain references, run build process and verify all generated URLs in HTML, list.md, and other generated files point to correct GitHub Pages domain structure.
### Details:


## 4. Fix search functionality path issue with subdirectory deployment [pending]
### Dependencies: None
### Description: Update JavaScript search implementation to respect site root configuration when constructing search.json path. See detailed analysis in .taskmaster/docs/search-issue-analysis.md
### Details:
JavaScript code in main.js constructs search path incorrectly when site is configured with subdirectory root. Currently looks for /search.json but with root: /reference/, file is generated at /reference/search.json. Need to update path construction to respect hexo config root setting.

## 5. Verify all asset paths use Hexo helpers for path safety [pending]
### Dependencies: 4.4
### Description: Conduct thorough review of all theme assets to ensure they use Hexo path helpers rather than hardcoded paths to ensure compatibility with subdirectory deployments.
### Details:
Review all EJS templates and JavaScript files to ensure path construction respects the site's root configuration. This includes CSS, JS, image assets, and any dynamically generated paths.

